<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>eBird Status and Trends predictive habitat associations — ebirdst_habitat • ebirdst</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="eBird Status and Trends predictive habitat associations — ebirdst_habitat" />
<meta property="og:description" content="Combine the predictor importance (PI) and partial dependence (PD) data to
provide an estimate of the importance and directionality of the land cover
classes (i.e. habitat) used as covariates in the occurrence probability
model. Note: This is one of, if not the most, computationally expensive
operations in the package." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ebirdst</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/ebirdst.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/ebirdst-intro-mapping.html">Introduction to Mapping</a>
    </li>
    <li>
      <a href="../articles/ebirdst-advanced-mapping.html">Advanced Mapping</a>
    </li>
    <li>
      <a href="../articles/ebirdst-non-raster.html">Non-raster Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li>
  <a href="../articles/product-changelog.html">Changelog</a>
</li>
<li>
  <a href="../news/index.html">Version History</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/CornellLabofOrnithology/ebirdst/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>eBird Status and Trends predictive habitat associations</h1>
    <small class="dont-index">Source: <a href='https://github.com/CornellLabofOrnithology/ebirdst/blob/master/R/ebirdst-habitat.R'><code>R/ebirdst-habitat.R</code></a></small>
    <div class="hidden name"><code>ebirdst_habitat.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Combine the predictor importance (PI) and partial dependence (PD) data to
provide an estimate of the importance and directionality of the land cover
classes (i.e. habitat) used as covariates in the occurrence probability
model. <strong>Note:</strong> This is one of, if not the most, computationally expensive
operations in the package.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>ebirdst_habitat</span><span class='op'>(</span><span class='va'>path</span>, <span class='va'>ext</span>, pis <span class='op'>=</span> <span class='cn'>NULL</span>, pds <span class='op'>=</span> <span class='cn'>NULL</span>, stixels <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='co'># S3 method for ebirdst_habitat</span>
<span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>x</span>, n_predictors <span class='op'>=</span> <span class='fl'>15</span>, date_range <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span>, <span class='va'>...</span><span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>path</th>
      <td><p>character; directory that the Status and Trends data for a given
species was downloaded to. This path is returned by <code><a href='ebirdst_download.html'>ebirdst_download()</a></code>
or <code><a href='get_species_path.html'>get_species_path()</a></code>.</p></td>
    </tr>
    <tr>
      <th>ext</th>
      <td><p><a href='ebirdst_extent.html'>ebirdst_extent</a> object; the spatiotemporal extent over which to
calculate the habitat associations. Note that <strong>temporal component of <code>ext</code>
is ignored is this function</strong>, habitat associations are always calculated
for the full year.</p></td>
    </tr>
    <tr>
      <th>pis, pds, stixels</th>
      <td><p>as an alternative to providing the <code>path</code> argument
specifying the location of the data package, the data required to calculate
habitat associations can be provided explicitly. PI, PD, and stixel data
frames can provided, which come from the <code><a href='load_pis.html'>load_pis()</a></code>, <code><a href='load_pds.html'>load_pds()</a></code>, and
<code><a href='load_stixels.html'>load_stixels()</a></code> functions, respectively. Ignored if <code>path</code> is provided.
<strong>In most cases, users will want to avoid using these arguments and simply
provide <code>path</code> instead.</strong></p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>ebirdst_habitat object; habitat relationships as calculated by
<code>ebirdst_habitat()</code>.</p></td>
    </tr>
    <tr>
      <th>n_predictors</th>
      <td><p>number of predictors to include in the cake plot. The
most important set of predictors will be chosen based on the maximum weekly
importance value across the whole year.</p></td>
    </tr>
    <tr>
      <th>date_range</th>
      <td><p>the range of dates for plotting; a 2-element vector of the
start and end dates of the date range, provided either as dates (Date
objects or strings in ISO format "YYYY-MM-DD") or numbers between 0 and 1
representing the fraction of the year. When providing dates as a string,
the year can be omitted (i.e. "MM-DD"). By default the full year of data
are plotted.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>ignored.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An <code>ebirdst_habitat</code> object, consisting of a data frame giving the
predictor importance and directionality for each predictor for each week of
the year. The columns are:</p><ul>
<li><p><code>predictor</code>: the name of the predictor</p></li>
<li><p><code>date</code>: the week centroid expressed as a continuous value between 0-1.
See <a href='ebirdst_weeks.html'>ebirdst_weeks</a> to convert these values to ISO dates.</p></li>
<li><p><code>importance</code>: the relative importance of the predictor, these values are
scaled so they sum to 1 within each week.</p></li>
<li><p><code>direction</code>: the direction of the relationship, either 1 for a positive
relationship, -1 for a negative relationship, or NA when the direction of
the relationship is not significant.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The Status and Trends models use both effort (e.g. number of
observers, length of checklist) and habitat (e.g. elevation, percent forest
cover) covariates; for the full list consult <a href='ebirdst_predictors.html'>ebirdst_predictors</a>. This
function calculates habitat associations only for the following covariates
that most closely represent metrics of available habitat. In all cases
these are calculated within a 1.5 km radius of each checklist:</p><ul>
<li><p>Land cover: percent of each landcover class</p></li>
<li><p>Water cover: percent of each watercover class</p></li>
<li><p>Intertidal: percent cover of intertidal mudflats</p></li>
<li><p>Nighttime lights: total refelctance of nighttime lights</p></li>
<li><p>Roads: road density. There are 5 covariates distinguishing between
different road types; however, these are grouped together for the sake of
the habitat associations.</p></li>
</ul>

<p>The <code><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot()</a></code> method can be used to produce a cake plot, a stacked area chart
showing habitat associations in which area indicates the importance of a
given land cover class and the position above or below the x-axis indicates
the direction of the relationship.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='co'># \donttest{</span></span>
<span class='r-in'><span class='co'># download example data</span></span>
<span class='r-in'><span class='va'>path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ebirdst_download.html'>ebirdst_download</a></span><span class='op'>(</span><span class='st'>"example_data"</span>, tifs_only <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Data already exists, use force = TRUE to re-download.</span>
<span class='r-in'><span class='co'># or get the path if you already have the data downloaded</span></span>
<span class='r-in'><span class='va'>path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_species_path.html'>get_species_path</a></span><span class='op'>(</span><span class='st'>"example_data"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># define a spatial extent to calculate ppms over</span></span>
<span class='r-in'><span class='va'>bb_vec</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>xmin <span class='op'>=</span> <span class='op'>-</span><span class='fl'>86</span>, xmax <span class='op'>=</span> <span class='op'>-</span><span class='fl'>83</span>, ymin <span class='op'>=</span> <span class='fl'>42.5</span>, ymax <span class='op'>=</span> <span class='fl'>44.5</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>e</span> <span class='op'>&lt;-</span> <span class='fu'><a href='ebirdst_extent.html'>ebirdst_extent</a></span><span class='op'>(</span><span class='va'>bb_vec</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># compute habitat associations</span></span>
<span class='r-in'><span class='va'>habitat</span> <span class='op'>&lt;-</span> <span class='fu'>ebirdst_habitat</span><span class='op'>(</span>path <span class='op'>=</span> <span class='va'>path</span>, ext <span class='op'>=</span> <span class='va'>e</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'><a href='https://www.math.uzh.ch/pages/spam//reference/print.html'>print</a></span><span class='op'>(</span><span class='va'>habitat</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 1,040 × 5</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    predictor                        date importance prob_pos_slope direction</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  <span style='color: #BCBCBC;'>*</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                           <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>          <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span> mcd12q1_lccs1_fs_c1_1500_pland 0.009<span style='text-decoration: underline;'>6</span>   0.000<span style='text-decoration: underline;'>912</span>             <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span> mcd12q1_lccs1_fs_c1_1500_pland 0.028<span style='text-decoration: underline;'>8</span>   0.000<span style='text-decoration: underline;'>959</span>             <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span> mcd12q1_lccs1_fs_c1_1500_pland 0.048<span style='text-decoration: underline;'>1</span>   0.001<span style='text-decoration: underline;'>01</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span> mcd12q1_lccs1_fs_c1_1500_pland 0.067<span style='text-decoration: underline;'>3</span>   0.001<span style='text-decoration: underline;'>07</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span> mcd12q1_lccs1_fs_c1_1500_pland 0.086<span style='text-decoration: underline;'>5</span>   0.001<span style='text-decoration: underline;'>14</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span> mcd12q1_lccs1_fs_c1_1500_pland 0.106    0.001<span style='text-decoration: underline;'>20</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span> mcd12q1_lccs1_fs_c1_1500_pland 0.125    0.001<span style='text-decoration: underline;'>26</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span> mcd12q1_lccs1_fs_c1_1500_pland 0.144    0.001<span style='text-decoration: underline;'>32</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span> mcd12q1_lccs1_fs_c1_1500_pland 0.164    0.001<span style='text-decoration: underline;'>36</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span> mcd12q1_lccs1_fs_c1_1500_pland 0.183    0.001<span style='text-decoration: underline;'>39</span>              <span style='color: #BB0000;'>NA</span>        <span style='color: #BB0000;'>NA</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 1,030 more rows</span></span>
<span class='r-in'><span class='co'># produce a cake plot</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>habitat</span><span class='op'>)</span></span>
<span class='r-plt'><img src='ebirdst_habitat-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span class='co'># }</span></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, Shawn Ligocki, <a href="http://twitter.com/tom_auer" class="external-link">Tom Auer</a>, Daniel Fink.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


