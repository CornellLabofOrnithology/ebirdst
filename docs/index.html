<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access and Analyze eBird Status and Trends Data â€¢ ebirdst</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access and Analyze eBird Status and Trends Data">
<meta property="og:description" content="Tools to download, map, plot and analyze eBird
    Status and Trends data
    (&lt;https://ebird.org/science/status-and-trends&gt;). eBird
    (&lt;https://ebird.org&gt;) is a global database of bird observations
    collected by citizen scientists. eBird Status and Trends uses these
    data to analyse continental bird abundances, range boundaries,
    habitats, and trends.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ebirdst</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/ebirdst-introduction.html">Introduction - Data Access and Structure</a>
</li>
<li>
  <a href="articles/ebirdst-intro-mapping.html">Intro Mapping</a>
</li>
<li>
  <a href="articles/ebirdst-advanced-mapping.html">Advanced Mapping</a>
</li>
<li>
  <a href="articles/ebirdst-non-raster.html">Non-Raster Data</a>
</li>
<li>
  <a href="reference/index.html">Function Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CornellLabofOrnithology/ebirdst">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="ebirdst-access-and-analyze-ebird-status-and-trends-data" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#ebirdst-access-and-analyze-ebird-status-and-trends-data" class="anchor"></a>ebirdst: Access and Analyze eBird Status and Trends Data</h1></div>

<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install <code>ebirdst</code> from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"ebirdst"</span>)</a></code></pre></div>
<p>Alternatively, you can install the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"CornellLabofOrnithology/ebirdst"</span>)</a></code></pre></div>
<p>The current version of <code>ebirdst</code> is designed for working with the eBird Status and Trends data estimated for 2018. Older versions of the Status and Trends data can be accessed by installing the associated version of <code>ebirdst</code> from GitHub. For example, 2016 estimates, corresponding to v0.1.0 of this package, can be accessed with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"CornellLabofOrnithology/ebirdst@v0.1.0"</span>)</a></code></pre></div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>If you use the the eBird Status &amp; Trends data please cite it with:</p>
<blockquote>
Fink, D., T. Auer, A. Johnston, M. Strimas-Mackey, O. Robinson, S.
Ligocki, B. Petersen, C. Wood, I. Davies, B. Sullivan, M. Iliff, S.
Kelling. 2020. eBird Status and Trends, Data Version: 2018; Released:
2020. Cornell Lab of Ornithology, Ithaca, New York.
<a href="https://doi.org/10.2173/ebirdst.2018" class="uri">https://doi.org/10.2173/ebirdst.2018</a>
</blockquote>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<p>For a full introduction and advanced usage, please see the package <a href="https://cornelllabofornithology.github.io/ebirdst">website</a>. An <a href="https://cornelllabofornithology.github.io/ebirdst/articles/ebirdst-introduction.html">introductory vignette</a> details the data access and structure of the results. An <a href="https://cornelllabofornithology.github.io/ebirdst/articles/ebirdst-intro-mapping.html">intro mapping vignette</a> expands upon the quick start readme and shows the basic mapping moves. The <a href="https://cornelllabofornithology.github.io/ebirdst/articles/ebirdst-advanced-mapping.html">advanced mapping vignette</a> shows how to reproduce the seasonal maps and statistics on the <a href="https://ebird.org/science/status-and-trends">eBird Status and Trends website</a>. Finally, the <a href="https://cornelllabofornithology.github.io/ebirdst/articles/ebirdst-pipd.html">non-raster data vignette</a> details how to access additional information from the model results about predictor importance and directionality, as well as predictive performance metrics.</p>
<p>To access old versions of the vignettes suitable for working with previous eBird Status and Trends releases go to the <a href="https://github.com/CornellLabofOrnithology/ebirdst/releases">versions page of the GitHub repository</a>. Download and unzip the source code for the release associated with the version of the data you want to work with. Opening the file <code>docs/index.html</code> will open the package website for this version, which gives access to all the documentation and vignettes.</p>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick Start</h2>
<p>This quick start guide shows how to download data and plot abundance values similar to how they are plotted for the <a href="https://ebird.org/science/status-and-trends/woothr/abundance-map-weekly">eBird Status and Trends Abundance animations</a>. In this guide, a simplified example dataset is used consisting of Yellow-bellied Sapsucker in Michigan. For a full list of the species available for download, look at the data frame <code>ebirst_runs</code>, which is included in this package.</p>
<p><strong>Important note: after downloading the results, do not change the file structure.</strong> All functionality in this package relies on the structure inherent in the delivered results. Changing the folder and file structure will cause errors with this package. If you use this package to analyze the results, you do not ever need to interact with the files directly, outside of R.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ebirdst)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(viridis)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(raster)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sf)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rnaturalearth)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># download data</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co"># download a simplified example dataset from aws s3</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co"># example data are for yellow-bellied sapsucker in michigan</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co"># by default files will be stored in a persistent data directory:</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co"># rappdirs::user_data_dir("ebirdst"))</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">sp_path &lt;-<span class="st"> </span><span class="kw"><a href="reference/ebirdst_download.html">ebirdst_download</a></span>(<span class="dt">species =</span> <span class="st">"example_data"</span>)</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co"># load estimated relative abundance and label with dates</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co"># this raster stack has 52 layers, one for each week of the year</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16">abunds &lt;-<span class="st"> </span><span class="kw"><a href="reference/load_raster.html">load_raster</a></span>(<span class="st">"abundance"</span>, <span class="dt">path =</span> sp_path)</a>
<a class="sourceLine" id="cb4-17" data-line-number="17"></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co"># use parse_raster_dates() to get actual date objects for each layer</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19">date_vector &lt;-<span class="st"> </span><span class="kw"><a href="reference/parse_raster_dates.html">parse_raster_dates</a></span>(abunds)</a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(date_vector)</a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt;  [1] "2018-01-04" "2018-01-11" "2018-01-18" "2018-01-25" "2018-02-01" "2018-02-08" "2018-02-15"</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt;  [8] "2018-02-22" "2018-03-01" "2018-03-08" "2018-03-15" "2018-03-22" "2018-03-29" "2018-04-05"</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; [15] "2018-04-12" "2018-04-19" "2018-04-26" "2018-05-03" "2018-05-10" "2018-05-17" "2018-05-24"</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; [22] "2018-05-31" "2018-06-07" "2018-06-14" "2018-06-21" "2018-06-28" "2018-07-06" "2018-07-13"</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt; [29] "2018-07-20" "2018-07-27" "2018-08-03" "2018-08-10" "2018-08-17" "2018-08-24" "2018-08-31"</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; [36] "2018-09-07" "2018-09-14" "2018-09-21" "2018-09-28" "2018-10-05" "2018-10-12" "2018-10-19"</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt; [43] "2018-10-26" "2018-11-02" "2018-11-09" "2018-11-16" "2018-11-23" "2018-11-30" "2018-12-07"</span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt; [50] "2018-12-14" "2018-12-21" "2018-12-28"</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co"># select a week in the summer</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31">abund &lt;-<span class="st"> </span>abunds[[<span class="dv">26</span>]]</a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="kw"><a href="https://rdrr.io/r/base/rm.html">rm</a></span>(abunds)</a>
<a class="sourceLine" id="cb4-33" data-line-number="33"></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co"># project to mollweide for mapping</span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"><span class="co"># the nearest neighbor method preserves cell values across projections</span></a>
<a class="sourceLine" id="cb4-36" data-line-number="36">mollweide &lt;-<span class="st"> "+proj=moll +lon_0=-90 +x_0=0 +y_0=0 +ellps=WGS84"</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37">abund_moll &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html">projectRaster</a></span>(abund, <span class="dt">crs =</span> mollweide, <span class="dt">method =</span> <span class="st">"ngb"</span>)</a>
<a class="sourceLine" id="cb4-38" data-line-number="38"></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co"># get reference data from the rnaturalearth package</span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co"># the example data currently shows only the US state of Michigan</span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41">wh_states &lt;-<span class="st"> </span><span class="kw"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_states.html">ne_states</a></span>(<span class="dt">country =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"United States of America"</span>, <span class="st">"Canada"</span>),</a>
<a class="sourceLine" id="cb4-42" data-line-number="42">                    <span class="dt">returnclass =</span> <span class="st">"sf"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_transform.html">st_transform</a></span>(<span class="dt">crs =</span> mollweide) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_geometry</a></span>()</a>
<a class="sourceLine" id="cb4-45" data-line-number="45">  </a>
<a class="sourceLine" id="cb4-46" data-line-number="46"><span class="co"># calculate ideal color bins for abundance values for this week</span></a>
<a class="sourceLine" id="cb4-47" data-line-number="47">week_bins &lt;-<span class="st"> </span><span class="kw"><a href="reference/calc_bins.html">calc_bins</a></span>(abund_moll)</a>
<a class="sourceLine" id="cb4-48" data-line-number="48"></a>
<a class="sourceLine" id="cb4-49" data-line-number="49"><span class="co"># start plotting</span></a>
<a class="sourceLine" id="cb4-50" data-line-number="50"><span class="kw"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(<span class="dt">mfrow =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">mar =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb4-51" data-line-number="51"></a>
<a class="sourceLine" id="cb4-52" data-line-number="52"><span class="co"># use raster bounding box to set the spatial extent for the plot</span></a>
<a class="sourceLine" id="cb4-53" data-line-number="53">bb &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_as_sfc.html">st_as_sfc</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_bbox.html">st_bbox</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/raster/man/trim.html">trim</a></span>(abund_moll)))</a>
<a class="sourceLine" id="cb4-54" data-line-number="54"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(bb, <span class="dt">col =</span> <span class="st">"white"</span>, <span class="dt">border =</span> <span class="st">"white"</span>)</a>
<a class="sourceLine" id="cb4-55" data-line-number="55"></a>
<a class="sourceLine" id="cb4-56" data-line-number="56"><span class="co"># add background reference data</span></a>
<a class="sourceLine" id="cb4-57" data-line-number="57"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(wh_states, <span class="dt">col =</span> <span class="st">"#eeeeee"</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-58" data-line-number="58"></a>
<a class="sourceLine" id="cb4-59" data-line-number="59"><span class="co"># plot zeroes as gray</span></a>
<a class="sourceLine" id="cb4-60" data-line-number="60"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(abund_moll <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">col =</span> <span class="st">"#dddddd"</span>, </a>
<a class="sourceLine" id="cb4-61" data-line-number="61">     <span class="dt">maxpixels =</span> <span class="kw"><a href="https://rdrr.io/pkg/raster/man/ncell.html">ncell</a></span>(abund_moll),</a>
<a class="sourceLine" id="cb4-62" data-line-number="62">     <span class="dt">axes =</span> <span class="ot">FALSE</span>, <span class="dt">legend =</span> <span class="ot">FALSE</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-63" data-line-number="63"></a>
<a class="sourceLine" id="cb4-64" data-line-number="64"><span class="co"># define color bins</span></a>
<a class="sourceLine" id="cb4-65" data-line-number="65">qcol &lt;-<span class="st"> </span><span class="kw"><a href="reference/abundance_palette.html">abundance_palette</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(week_bins<span class="op">$</span>bins) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>, <span class="st">"weekly"</span>)</a>
<a class="sourceLine" id="cb4-66" data-line-number="66"></a>
<a class="sourceLine" id="cb4-67" data-line-number="67"><span class="co"># plot abundances</span></a>
<a class="sourceLine" id="cb4-68" data-line-number="68"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(abund_moll, <span class="dt">col =</span> qcol, <span class="dt">breaks =</span> week_bins<span class="op">$</span>bins,</a>
<a class="sourceLine" id="cb4-69" data-line-number="69">     <span class="dt">maxpixels =</span> <span class="kw"><a href="https://rdrr.io/pkg/raster/man/ncell.html">ncell</a></span>(abund_moll),</a>
<a class="sourceLine" id="cb4-70" data-line-number="70">     <span class="dt">axes =</span> <span class="ot">FALSE</span>, <span class="dt">legend =</span> <span class="ot">FALSE</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb4-71" data-line-number="71"></a>
<a class="sourceLine" id="cb4-72" data-line-number="72"><span class="co"># for legend, create a smaller set of bin labels</span></a>
<a class="sourceLine" id="cb4-73" data-line-number="73">bin_labels &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>(week_bins<span class="op">$</span>bins, <span class="dv">2</span>), <span class="dt">nsmall =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb4-74" data-line-number="74">bin_labels[<span class="op">!</span>(bin_labels <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(bin_labels[<span class="dv">1</span>],</a>
<a class="sourceLine" id="cb4-75" data-line-number="75">                               bin_labels[<span class="kw"><a href="https://rdrr.io/r/base/Round.html">round</a></span>((<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(bin_labels) <span class="op">/</span><span class="st"> </span><span class="dv">2</span>)) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb4-76" data-line-number="76">                               bin_labels[<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(bin_labels)]))] &lt;-<span class="st"> ""</span></a>
<a class="sourceLine" id="cb4-77" data-line-number="77">bin_labels &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"0"</span>, bin_labels)</a>
<a class="sourceLine" id="cb4-78" data-line-number="78"></a>
<a class="sourceLine" id="cb4-79" data-line-number="79"><span class="co"># create colors that include gray for 0</span></a>
<a class="sourceLine" id="cb4-80" data-line-number="80">lcol &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"#dddddd"</span>, qcol)</a>
<a class="sourceLine" id="cb4-81" data-line-number="81"></a>
<a class="sourceLine" id="cb4-82" data-line-number="82"><span class="co"># set legend such that color ramp appears linearly</span></a>
<a class="sourceLine" id="cb4-83" data-line-number="83">ltq &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dt">from =</span> week_bins<span class="op">$</span>bins[<span class="dv">1</span>], <span class="dt">to =</span> week_bins<span class="op">$</span>bins[<span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(week_bins<span class="op">$</span>bins)],</a>
<a class="sourceLine" id="cb4-84" data-line-number="84">           <span class="dt">length.out =</span> <span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(week_bins<span class="op">$</span>bins))</a>
<a class="sourceLine" id="cb4-85" data-line-number="85">ltq &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, ltq)</a>
<a class="sourceLine" id="cb4-86" data-line-number="86"></a>
<a class="sourceLine" id="cb4-87" data-line-number="87"><span class="co"># plot legend</span></a>
<a class="sourceLine" id="cb4-88" data-line-number="88"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(abund_moll <span class="op">^</span><span class="st"> </span>week_bins<span class="op">$</span>power, <span class="dt">legend.only =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb4-89" data-line-number="89">     <span class="dt">col =</span> lcol,</a>
<a class="sourceLine" id="cb4-90" data-line-number="90">     <span class="dt">breaks =</span> ltq <span class="op">^</span><span class="st"> </span>week_bins<span class="op">$</span>power, </a>
<a class="sourceLine" id="cb4-91" data-line-number="91">     <span class="dt">lab.breaks =</span> bin_labels, <span class="dt">legend.shrink =</span> <span class="fl">0.97</span>,</a>
<a class="sourceLine" id="cb4-92" data-line-number="92">     <span class="dt">legend.width =</span> <span class="dv">2</span>, <span class="dt">axis.args =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">cex.axis =</span> <span class="fl">0.9</span>, <span class="dt">lwd.ticks =</span> <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb4-93" data-line-number="93"></a>
<a class="sourceLine" id="cb4-94" data-line-number="94"><span class="co"># add state boundaries on top</span></a>
<a class="sourceLine" id="cb4-95" data-line-number="95"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_geometry</a></span>(wh_states), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="ot">NA</span>, <span class="dt">border =</span> <span class="st">"white"</span>, <span class="dt">lwd =</span> <span class="fl">1.5</span>)</a></code></pre></div>
<p><img src="README-quick_start-1.png" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=ebirdst">https://â€‹cloud.r-project.org/â€‹package=ebirdst</a>
</li>
<li>Browse source code at <br><a href="https://github.com/CornellLabofOrnithology/ebirdst">https://â€‹github.com/â€‹CornellLabofOrnithology/â€‹ebirdst</a>
</li>
<li>Report a bug at <br><a href="https://github.com/CornellLabofOrnithology/ebirdst/issues">
    https://â€‹github.com/â€‹CornellLabofOrnithology/â€‹ebirdst/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing ebirdst</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://strimas.com">Matthew Strimas-Mackey</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8929-7776" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>
<a href="http://twitter.com/tom_auer">Tom Auer</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8619-7147" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li>Daniel Fink <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-8368-1248" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID"></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a></li>
<li><a href="https://ci.appveyor.com/project/mstrimas/ebirdst/branch/master"><img src="https://ci.appveyor.com/api/projects/status/v7cyxwquwrxxa5l6/branch/master?svg=true" alt="AppVeyor Build status"></a></li>
<li><a href="https://travis-ci.org/CornellLabofOrnithology/ebirdst"><img src="https://travis-ci.org/CornellLabofOrnithology/ebirdst.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/github/CornellLabofOrnithology/ebirdst?branch=master"><img src="https://codecov.io/gh/CornellLabofOrnithology/ebirdst/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=ebirdst"><img src="https://www.r-pkg.org/badges/version/ebirdst" alt="CRAN status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://strimas.com">Matthew Strimas-Mackey</a>, <a href="http://twitter.com/tom_auer">Tom Auer</a>, Daniel Fink.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
